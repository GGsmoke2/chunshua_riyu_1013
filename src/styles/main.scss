// 移动端弹窗适配
@use './mobile-dialog.scss';
:root {
  --primary-color: #4A90E2;
  --primary-light: #6BA5E7;
  --primary-dark: #2A7AD2;
  
  --secondary-color: #7ED321;
  --secondary-light: #99DB4B;
  --secondary-dark: #5EAF0F;
  
  --accent-color: #F5A623;
  --accent-light: #F7B84D;
  --accent-dark: #E59008;
  
  --success-color: #2ecc71;
  --warning-color: #f39c12;
  --error-color: #e74c3c;
  
  --background-color: #F8F9FA;
  --card-color: #FFFFFF;
  
  --text-color: #333333;
  --text-light: #666666;
  --text-muted: #999999;
  
  --border-radius: 8px;
  --border-color: #E0E0E0;
  
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.15);
  
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-xxl: 48px;
  
  --transition-fast: 0.2s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.5s ease;
}

/* Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  font-family: 'Noto Sans SC', 'Hiragino Sans', sans-serif;
  font-size: 16px;
  line-height: 1.5;
  color: var(--text-color);
  background-color: var(--background-color);
}

body {
  display: block;
  margin: 0;
  min-width: initial;
  min-height: initial;
}

a {
  text-decoration: none;
  color: var(--primary-color);
  transition: color var(--transition-fast);
  
  &:hover {
    color: var(--primary-dark);
  }
}

img {
  max-width: 100%;
  height: auto;
}

button {
  cursor: pointer;
  font-family: inherit;
}

/* Japanese text optimizations */
.jp-text {
  /* This improves readability for Japanese text */
  text-justify: inter-ideograph;
  line-height: 1.7;
}

/* Kanji with furigana */
ruby {
  rt {
    font-size: 0.6em;
    color: var(--text-muted);
  }
}

/* Layout utilities */
.container {
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 var(--spacing-md);
  
  @media (min-width: 768px) {
    padding: 0 var(--spacing-lg);
  }
}

.section {
  padding: var(--spacing-xl) 0;
}

.section-title {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: var(--spacing-lg);
  text-align: center;
  
  &::after {
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background-color: var(--primary-color);
    margin: var(--spacing-sm) auto 0;
  }
}

.section-subtitle {
  font-size: 1.1rem;
  color: var(--text-light);
  text-align: center;
  max-width: 700px;
  margin: -15px auto var(--spacing-xl);
}

/* Card styles */
.card {
  background-color: var(--card-color);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
  }
}

/* Grid system */
.grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-lg);
  
  @media (min-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
  }
  
  @media (min-width: 1024px) {
    grid-template-columns: repeat(3, 1fr);
  }
  
  @media (min-width: 1280px) {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* Button styles */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 20px;
  border-radius: var(--border-radius);
  font-weight: 500;
  transition: all var(--transition-normal);
  border: none;
  
  &-primary {
    background-color: var(--primary-color);
    color: white;
    
    &:hover {
      background-color: var(--primary-dark);
    }
  }
  
  &-secondary {
    background-color: var(--secondary-color);
    color: white;
    
    &:hover {
      background-color: var(--secondary-dark);
    }
  }
  
  &-accent {
    background-color: var(--accent-color);
    color: white;
    
    &:hover {
      background-color: var(--accent-dark);
    }
  }
  
  &-outlined {
    background-color: transparent;
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    
    &:hover {
      background-color: var(--primary-color);
      color: white;
    }
  }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.fade-in {
  animation: fadeIn var(--transition-normal);
}

.slide-in-up {
  animation: slideInUp var(--transition-normal);
}

/* 原生应用环境检测和适配 */
body.capacitor {
  /* 确保在 Capacitor 环境下正确处理状态栏 */
  --status-bar-height: env(safe-area-inset-top, 0px);
  
  /* 移动端特殊处理 */
  @media (max-width: 768px) {
    --status-bar-height: env(safe-area-inset-top, 0px);
  }
}

/* 非原生环境的移动端 */
body:not(.capacitor) {
  @media (max-width: 768px) {
    --status-bar-height: 20px; /* 默认状态栏高度 */
  }
}

/* 移动端安全区域适配增强 */
@supports (padding: max(0px)) {
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }
  
  .safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }
  
  .safe-area-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }
  
  .safe-area-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}

/* 移动端视口适配 */
@media (max-width: 768px) {
  html {
    /* 防止横屏时内容被遮挡 */
    padding: env(safe-area-inset-top, 0px) env(safe-area-inset-right, 0px) env(safe-area-inset-bottom, 0px) env(safe-area-inset-left, 0px);
  }
  
  body {
    /* 重置body的padding，由具体组件控制 */
    padding: 0;
  }
}

/* 非原生环境的移动端 */
body:not(.capacitor) {
  @media (max-width: 768px) {
    --status-bar-height: 20px; /* 默认状态栏高度 */
  }
}

/* 移动端安全区域适配增强 */
@supports (padding: max(0px)) {
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }
  
  .safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }
  
  .safe-area-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }
  
  .safe-area-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}

/* 移动端视口适配 */
@media (max-width: 768px) {
  html {
    /* 防止横屏时内容被遮挡 */
    padding: env(safe-area-inset-top, 0px) env(safe-area-inset-right, 0px) env(safe-area-inset-bottom, 0px) env(safe-area-inset-left, 0px);
  }
  
  body {
    /* 重置body的padding，由具体组件控制 */
    padding: 0;
  }
}

/* 移动端客服联系样式 */
.mobile-contact {
  text-align: center;
  padding: var(--spacing-md) 0;
  
  p {
    color: var(--text-color);
    margin-bottom: var(--spacing-xs);
    
    &.tip {
      color: var(--text-light);
      font-size: 0.9rem;
    }
  }
}

/* 客服按钮样式 */
.consultation-btn {
  background: linear-gradient(135deg, #1aad19, #2dc653);
  border: none;
  color: white;
  
  &:hover {
    background: linear-gradient(135deg, #179b16, #28b946);
  }
}

/* 移动端 Toast 样式 - 确保显示在屏幕下方 */
.mobile-toast-bottom {
  position: fixed !important;
  bottom: 80px !important;
  top: auto !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 9999 !important;
  max-width: calc(100vw - 32px) !important;
  margin: 0 16px !important;
  
  /* 确保在原生应用中也能正确显示 */
  @media (max-width: 768px) {
    bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
  }
  
  /* 原生应用环境适配 */
  body.capacitor & {
    bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
  }
}

/* 现代化退出Toast样式 */
.modern-exit-toast {
  /* 1. 现代化设计：半透明黑色背景配合毛玻璃效果 */
  background: rgba(0, 0, 0, 0.85) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  
  /* 2. 圆角设计：24px圆角 */
  border-radius: 24px !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  
  /* 3. 阴影效果：多层阴影增加立体感 */
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    0 4px 16px rgba(0, 0, 0, 0.2),
    0 2px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  
  /* 7. 高对比度：纯白色文字确保可读性 */
  color: #ffffff !important;
  font-weight: 500 !important;
  font-size: 16px !important;
  line-height: 1.5 !important;
  letter-spacing: 0.3px !important;
  
  /* 基础样式 - 调整宽度避免折行 */
  padding: 18px 32px !important;
  min-height: auto !important;
  min-width: 280px !important;
  max-width: min(400px, calc(100vw - 40px)) !important;
  white-space: nowrap !important;
  
  /* 4. 动画效果：滑入动画 */
  animation: modernSlideIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  
  /* 文字样式优化 - 确保居中显示 */
  .el-message__content {
    color: #ffffff !important;
    text-align: center !important;
    line-height: 1.5 !important;
    font-weight: 500 !important;
    white-space: nowrap !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100% !important;
  }
  
  /* 确保整个Toast容器也居中 */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;
  
  /* 悬停效果 */
  &:hover {
    transform: translateX(-50%) translateY(-2px) !important;
    box-shadow: 
      0 12px 40px rgba(0, 0, 0, 0.4),
      0 6px 20px rgba(0, 0, 0, 0.25),
      0 3px 12px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
  }
  
  /* 5. 响应式适配：针对不同屏幕尺寸优化 */
  @media (max-width: 768px) {
    font-size: 15px !important;
    padding: 16px 28px !important;
    border-radius: 20px !important;
    min-width: 260px !important;
    max-width: min(380px, calc(100vw - 32px)) !important;
    letter-spacing: 0.2px !important;
  }
  
  @media (max-width: 480px) {
    font-size: 14px !important;
    padding: 14px 24px !important;
    border-radius: 18px !important;
    min-width: 240px !important;
    max-width: min(320px, calc(100vw - 24px)) !important;
  }
  
  /* 超小屏幕允许适当折行 */
  @media (max-width: 320px) {
    white-space: normal !important;
    min-width: 200px !important;
    max-width: calc(100vw - 20px) !important;
    
    .el-message__content {
      white-space: normal !important;
    }
  }
  
  /* 6. 安全区域适配：刘海屏和底部安全区域 */
  @media (max-width: 768px) {
    bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
  }
}

/* 4. 现代化滑入动画 */
@keyframes modernSlideIn {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(40px) scale(0.9);
    filter: blur(4px);
  }
  60% {
    opacity: 0.8;
    transform: translateX(-50%) translateY(-8px) scale(1.02);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
    filter: blur(0);
  }
}

/* 退场动画 */
@keyframes modernSlideOut {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(30px) scale(0.95);
    filter: blur(2px);
  }
}

/* Element Plus Message 组件移动端适配 */
@media (max-width: 768px) {
  .el-message {
    &.mobile-toast-bottom {
      position: fixed !important;
      bottom: 80px !important;
      top: auto !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      z-index: 9999 !important;
      max-width: calc(100vw - 32px) !important;
      margin: 0 16px !important;
      
      /* 安全区域适配 */
      bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
    }
    
    /* 现代化样式在移动端的特殊处理 */
    &.modern-exit-toast {
      /* 确保安全区域适配 */
      bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
      
      /* 移动端触摸反馈 */
      &:active {
        transform: translateX(-50%) scale(0.98) !important;
        transition: transform 0.1s ease !important;
      }
      
      /* 移动端宽度优化 */
      min-width: 260px !important;
      max-width: min(380px, calc(100vw - 32px)) !important;
    }
  }
}

/* 原生应用环境下的特殊适配 */
body.capacitor {
  .el-message.mobile-toast-bottom {
    bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
  }
  
  .el-message.modern-exit-toast {
    bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
    
    /* 原生应用中的毛玻璃效果增强 */
    backdrop-filter: blur(25px) saturate(200%) !important;
    -webkit-backdrop-filter: blur(25px) saturate(200%) !important;
  }
}

/* 深色模式适配 */
@media (prefers-color-scheme: dark) {
  .modern-exit-toast {
    background: rgba(0, 0, 0, 0.9) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
    
    .el-message__content {
      color: #ffffff !important;
    }
  }
}

/* 浅色模式适配 */
@media (prefers-color-scheme: light) {
  .modern-exit-toast {
    background: rgba(0, 0, 0, 0.85) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: #ffffff !important;
    
    .el-message__content {
      color: #ffffff !important;
    }
  }
}


